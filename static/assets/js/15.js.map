{"version":3,"sources":["webpack:///src/pages/user_page/user.vue","webpack:///./src/pages/user_page/user.vue?d726","webpack:///./src/pages/user_page/user.vue"],"names":["user","components","pagination","Pagination","new-edit","NewEdit","data","loadingUser","showForm","showAdd","dataUser","allUserName","notInAppUserName","allUser","optionsGroup","formUser","username","phone","email","addUserId","authUserId","rulesUser","userDetail","userAuthorityList","valueGroup","stateUser","title","width","labelPosition","totalNumber","currentPage","pageSize","created","this","getUser","search","computed","extends_default","Object","vuex_esm","methods","apiParam","_this","params","page","page_size","assign_default","$store","dispatch","then","res","result","count","items","show","ev","keyCode","pageSizeChange","val","handleNewUser","dialogAction","$refs","open","searchNotInAppUser","handleAuthority","scope","_this2","row","id","handleSuccess","_this3","$message","type","message","_params","cancel","checkboxChange","_this4","tipEnable","is_enable","$confirm","confirmButtonText","cancelButtonText","users","enable","_params2","catch","handleDelete","_this5","handleSelect","item","chname","value","handleSelectDialog","_this6","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","i","push","err","return","_this7","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","querySearchDetail","queryString","cb","filter","createStateFilterDetail","usernameDetail","toLowerCase","indexOf","querySearchAsync","createStateFilter","filters","arrayFormat","map","display_name","join","user_page_user","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fetch-suggestions","placeholder","clearable","on","select","nativeOn","keydown","$event","model","callback","$$v","expression","_v","directives","name","rawName","arg","size","click","ref","staticStyle","stripe","height","prop","label","show-overflow-tooltip","scopedSlots","_u","key","fn","_s","_f","groups","change","$set","fixed","total","page-size-change","dialog-action","handle-success","slot","label-position","label-width","rules","_e","_l","index","multiple","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"assets/js/15.js","sourcesContent":["<template>\n  <div class=\"user\">\n    <div class=\"search\">\n      <el-autocomplete\n        v-model=\"stateUser\"\n        :fetch-suggestions=\"querySearchAsync\"\n        placeholder=\"请输入用户名\"\n        @select=\"handleSelect\"\n        @keydown.native=\"show($event)\"\n        clearable>\n      </el-autocomplete>\n    </div>\n    <div class=\"new\">\n      <!-- <el-button size=\"mini\" v-if=\"showAdd\" type=\"primary\" @click=\"handleNewUser\">添加用户</el-button>\n      <el-button size=\"mini\" v-if=\"!showAdd\" type=\"primary\" disabled>添加用户</el-button> -->\n      <el-button\n        size=\"mini\"\n        type=\"primary\"\n        v-permission:add_bkuser=\"permissions\"\n        @click=\"handleNewUser\">\n        添加用户\n      </el-button>\n    </div>\n    <div class=\"table\">\n      <el-table\n        stripe\n        ref=\"\"\n        :data=\"dataUser\"\n        v-loading=\"loadingUser\"\n        style=\"width: 100%\"\n        height=\"100%\">\n        <!-- <el-table-column\n        type=\"selection\"\n        width=\"30\">\n        </el-table-column> -->\n        <el-table-column\n        prop=\"username\"\n        label=\"用户名\"\n        show-overflow-tooltip>\n        </el-table-column>\n        <el-table-column\n        prop=\"chname\"\n        label=\"中文名\"\n        show-overflow-tooltip>\n        </el-table-column>\n        <el-table-column\n        prop=\"phone\"\n        label=\"电话\"\n        show-overflow-tooltip>\n        </el-table-column>\n        <el-table-column\n        prop=\"email\"\n        label=\"邮箱\"\n        show-overflow-tooltip>\n        </el-table-column>\n        <el-table-column\n        prop=\"groups\"\n        label=\"所属角色\"\n        show-overflow-tooltip>\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.groups | arrayFormat}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n        label=\"是否启用\">\n          <template slot-scope=\"scope\">\n            <el-checkbox\n            v-model=\"scope.row.is_enable\"\n            @change=\"checkboxChange(scope.row)\">\n            </el-checkbox>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"handle\"\n          label=\"操作\"\n          fixed=\"right\"\n          width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" @click=\"handleAuthority(scope)\">权限</el-button>\n            <el-button type=\"text\" @click=\"handleDelete(scope)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <pagination\n      :total=\"totalNumber\"\n      @page-size-change=\"pageSizeChange\">\n    </pagination>\n    <new-edit ref=\"newEdit\" :title=\"title\" @handle-success=\"handleSuccess\" dialog-action=\"dialogAction\" :width=\"width\">\n      <div slot=\"dialog-content\" v-if=\"showForm\">\n        <el-form ref=\"formUser\" :label-position=\"labelPosition\" label-width=\"120px\" :model=\"formUser\" :rules=\"rulesUser\">\n          <el-form-item label=\"用户名\" prop=\"name\">\n            <el-autocomplete\n              clearable\n              size=\"small\"\n              class=\"inline-input\"\n              v-model=\"formUser.username\"\n              :fetch-suggestions=\"querySearchDetail\"\n              placeholder=\"请输入用户名\"\n              @select=\"handleSelectDialog\">\n            </el-autocomplete>\n          </el-form-item>\n          <el-form-item label=\"电话\" prop=\"phone\">\n            <span class=\"form-content\">{{formUser.phone}}</span>\n          </el-form-item>\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <span class=\"form-content\">{{formUser.email}}</span>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div slot=\"dialog-content\" v-if=\"!showForm\">\n        <div>\n          <div class=\"label-position\" v-for=\"(item, index) in userAuthorityList\" :key=\"index\">\n            <label class=\"label-position-left\">{{item.display_name}}</label>\n            <div class=\"label-position-right\">\n              <el-select clearable size=\"mini\" v-model=\"item.groups\" multiple placeholder=\"请选择角色\">\n                <el-option\n                  v-for=\"(item, index) in optionsGroup\"\n                  :key=\"index\"\n                  :label=\"item.label\"\n                  :value=\"item.value\">\n                </el-option>\n              </el-select>\n            </div>\n          </div>\n        </div>\n      </div>\n    </new-edit>\n  </div>\n</template>\n\n<script>\nimport Pagination from '@/components/Pagination'\nimport NewEdit from '@/components/NewEdit'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  components: {\n    'pagination': Pagination,\n    'new-edit': NewEdit,\n  },\n  data() {\n    return {\n      loadingUser: false,\n      showForm: true,\n      showAdd: false,\n      dataUser: [],\n      allUserName: [],\n      notInAppUserName: [],\n      allUser: [],\n      optionsGroup: [],\n      formUser: {\n        username: '',\n        phone: '',\n        email: '',\n      },\n      addUserId: '',\n      authUserId: '',\n      rulesUser: {},\n      userDetail: [],\n      userAuthorityList: [],\n      valueGroup: [],\n      stateUser: '',\n      title: '',\n      width: '35%',\n      labelPosition: '120px',\n      totalNumber: 0,\n      currentPage: 1,\n      pageSize: 10,\n    }\n  },\n  created() {\n    this.getUser()\n    this.search()\n    // this.showAdd = this.requirePerm('add_bkuser')\n  },\n  computed: {\n    ...mapGetters('leftmenu', ['permissions']),\n  },\n  methods: {\n    // requirePerm(permission) {\n    //   for (let i of this.permissions) {\n    //     if (i.codename == permission) {\n    //       return true\n    //     }\n    //   }\n    //   return false\n    // },\n    // 获取用户页面表格数据\n    getUser(apiParam) {\n      let params = {\n        page: this.currentPage,\n        page_size: this.pageSize,\n      }\n      params = Object.assign(params, apiParam)\n      this.$store.dispatch('user/getTableUser', params).then(res => {\n        if (res.result) {\n          this.totalNumber = res.data.count\n          this.dataUser = res.data.items\n        }\n      })\n    },\n    show(ev) {\n      if (ev.keyCode == 13) {\n        this.getUser()\n      }\n    },\n    // 表格分页\n    pageSizeChange(val) {\n      this.currentPage = val.currentPage\n      this.pageSize = val.pageSize\n      this.getUser({page: this.currentPage, page_size: this.pageSize})\n    },\n    handleNewUser() {\n      this.showForm = true\n      this.formUser = {}\n      this.dialogAction = 'new'\n      this.title = '新建'\n      this.$refs['newEdit'].open()\n      this.searchNotInAppUser()\n    },\n    handleAuthority(scope) {\n      this.showForm = false\n      this.title = '权限管理'\n      this.$refs['newEdit'].open()\n      this.authUserId = scope.row.id\n      let params = {\n        id: this.authUserId\n      }\n      this.$store.dispatch('user/getUserAuthority', params).then(res => {\n        if (res.result) {\n          this.userAuthorityList = res.data\n        }\n      })\n      this.$store.dispatch('user/getAllGroup').then(res => {\n        if (res.result) {\n          this.optionsGroup = res.data\n        }\n      })\n    },\n    handleSuccess() {\n      if (this.showForm == true) {\n        let params = {\n          id: this.addUserId\n        }\n        this.$store.dispatch('user/addUser', params).then(res => {\n          if (res.result) {\n            this.getUser()\n            this.$message({type: 'success', message: '添加用户成功'})\n          } else {\n            this.$message({type: 'error', message: '添加用户失败'})\n          }\n        })\n      } else if (this.showForm == false) {\n        let params = {\n          id: this.authUserId,\n          params: this.userAuthorityList\n        }\n        this.$store.dispatch('user/setUserPerm', params).then(res => {\n          if (res.result) {\n            this.getUser()\n            this.$message({type: 'success', message: '设置用户权限成功'})\n          } else {\n            this.$message({type: 'error', message: '设置用户权限失败'})\n          }\n        })\n      }\n      this.$refs['newEdit'].cancel()\n    },\n    checkboxChange(row) {\n      let tipEnable = row.is_enable ? '是否启用' : '是否禁用'\n      this.$confirm(tipEnable, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        if (row.is_enable == true) {\n          let params = {\n            users: [row.id],\n            enable: true\n          }\n          this.$store.dispatch('user/usersStatus', params).then(res => {\n            if (res.result) {\n              this.$message({type: 'success', message: '禁用成功'})\n            } else {\n              row.is_enable = !row.is_enable\n              this.$message({type: 'error', message: '禁用失败'})\n            }\n          });\n        } else if (row.is_enable == false) {\n          let params = {\n            users: [row.id],\n            enable: false\n          }\n          this.$store.dispatch('user/usersStatus', params).then(res => {\n            if (res.result) {\n              this.$message({type: 'success', message: '启用成功'})\n            } else {\n              row.is_enable = !row.is_enable\n              this.$message({type: 'error', message: '启用失败'})\n            }\n          });\n        }\n      }).catch(() => {\n        row.is_enable = !row.is_enable\n        this.$message({type: 'info', message: '调取接口失败'})\n      })\n    },\n    handleDelete(scope) {\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        let params = {\n          id: scope.row.id\n        }\n        this.$store.dispatch('user/deleteUser', params).then(res => {\n          if (res.result) {\n            this.getUser()\n            this.$message({type: 'success', message: '删除用户成功'})\n          } else {\n            this.$message({type: 'error', message: '删除用户失败'})\n          }\n        })\n      }).catch(() => {\n        this.$message({type: 'info', message: '已取消'})\n      })\n    },\n    // 关键字提醒后点击某一关键字后操作\n    handleSelect(item) {\n      this.getUser({chname: item.value})\n    },\n    handleSelectDialog(item) {\n      this.addUserId = item.id\n      this.formUser.phone = item.phone\n      this.formUser.email = item.email\n    },\n    // 获取所有用户（用于添加用户关键字提醒）\n    searchNotInAppUser() {\n      this.userDetail = []\n      this.$store.dispatch('user/getNotInAppUser').then(res => {\n        if (res.result) {\n          for (let i of res.data) {\n            this.userDetail.push({\n              value: i.chname,\n              phone: i.phone,\n              email: i.email,\n              id: i.id,\n            })\n          }\n        }\n      })\n    },\n    // 获取所有用户（用于搜索用户关键字提醒）\n    search() {\n      // this.allUserName = []\n      this.$store.dispatch('group/getAllUser').then(res => {\n        if (res.result) {\n          for (let i of res.data) {\n            this.allUserName.push({\n              value: i.chname\n            })\n          }\n        }\n      })\n    },\n    // 添加用户时用户输入匹配输入字符\n    querySearchDetail(queryString, cb) {\n      let userDetail = this.userDetail;\n      let results = queryString ? userDetail.filter(this.createStateFilterDetail(queryString)) : userDetail;\n      cb(results)\n    },\n    // 添加用户时用户输入匹配位置\n    createStateFilterDetail(queryString) {\n      return (usernameDetail) => {\n        return (usernameDetail.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\n      };\n    },\n    // 表格页匹配输入字符\n    querySearchAsync(queryString, cb) {\n      let allUserName = this.allUserName;\n      let results = queryString ? allUserName.filter(this.createStateFilter(queryString)) : allUserName;\n      cb(results)\n    },\n    // 表格页匹配位置\n    createStateFilter(queryString) {\n      return (username) => {\n        return (username.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\n      };\n    },\n  },\n  filters: {\n    arrayFormat(value) {\n      value = value.map(item => item.display_name)\n      return value.join(',')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  .user {\n    height: 100%;\n    padding: 15px 20px 0 20px;\n    background: #fff;\n    .search {\n      line-height: 100px;\n      text-align: center;\n      .el-autocomplete {\n        width: 65%;\n      }\n    }\n    .new {\n      height: 40px;\n    }\n    .table {\n      height: calc(100% - 180px);\n      .el-table {\n        border-top: 1px solid rgb(235, 238, 245);\n      }\n    }\n    .label-position {\n      margin: 0 0 15px 0;\n      height: 40px;\n      display: block;\n      .label-position-left {\n        width: 120px;\n        text-align: right;\n        vertical-align: middle;\n        float: left;\n        font-size: 14px;\n        color: #606266;\n        line-height: 40px;\n        padding: 0 12px 0 0;\n      }\n      .label-position-right {\n        line-height: 40px;\n        position: relative;\n        font-size: 14px;\n        margin-left: 120px;\n        .el-select.el-select--mini {\n          width: 80%\n        }\n      }\n    }\n    .inline-input {\n      width: 80%;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user_page/user.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user\"},[_c('div',{staticClass:\"search\"},[_c('el-autocomplete',{attrs:{\"fetch-suggestions\":_vm.querySearchAsync,\"placeholder\":\"请输入用户名\",\"clearable\":\"\"},on:{\"select\":_vm.handleSelect},nativeOn:{\"keydown\":function($event){_vm.show($event)}},model:{value:(_vm.stateUser),callback:function ($$v) {_vm.stateUser=$$v},expression:\"stateUser\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"new\"},[_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission:add_bkuser\",value:(_vm.permissions),expression:\"permissions\",arg:\"add_bkuser\"}],attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.handleNewUser}},[_vm._v(\"\\n      添加用户\\n    \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"table\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingUser),expression:\"loadingUser\"}],ref:\"\",staticStyle:{\"width\":\"100%\"},attrs:{\"stripe\":\"\",\"data\":_vm.dataUser,\"height\":\"100%\"}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chname\",\"label\":\"中文名\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":\"电话\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"groups\",\"label\":\"所属角色\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"arrayFormat\")(scope.row.groups)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否启用\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-checkbox',{on:{\"change\":function($event){_vm.checkboxChange(scope.row)}},model:{value:(scope.row.is_enable),callback:function ($$v) {_vm.$set(scope.row, \"is_enable\", $$v)},expression:\"scope.row.is_enable\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"handle\",\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.handleAuthority(scope)}}},[_vm._v(\"权限\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.handleDelete(scope)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_vm._v(\" \"),_c('pagination',{attrs:{\"total\":_vm.totalNumber},on:{\"page-size-change\":_vm.pageSizeChange}}),_vm._v(\" \"),_c('new-edit',{ref:\"newEdit\",attrs:{\"title\":_vm.title,\"dialog-action\":\"dialogAction\",\"width\":_vm.width},on:{\"handle-success\":_vm.handleSuccess}},[(_vm.showForm)?_c('div',{attrs:{\"slot\":\"dialog-content\"},slot:\"dialog-content\"},[_c('el-form',{ref:\"formUser\",attrs:{\"label-position\":_vm.labelPosition,\"label-width\":\"120px\",\"model\":_vm.formUser,\"rules\":_vm.rulesUser}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"name\"}},[_c('el-autocomplete',{staticClass:\"inline-input\",attrs:{\"clearable\":\"\",\"size\":\"small\",\"fetch-suggestions\":_vm.querySearchDetail,\"placeholder\":\"请输入用户名\"},on:{\"select\":_vm.handleSelectDialog},model:{value:(_vm.formUser.username),callback:function ($$v) {_vm.$set(_vm.formUser, \"username\", $$v)},expression:\"formUser.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"phone\"}},[_c('span',{staticClass:\"form-content\"},[_vm._v(_vm._s(_vm.formUser.phone))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('span',{staticClass:\"form-content\"},[_vm._v(_vm._s(_vm.formUser.email))])])],1)],1):_vm._e(),_vm._v(\" \"),(!_vm.showForm)?_c('div',{attrs:{\"slot\":\"dialog-content\"},slot:\"dialog-content\"},[_c('div',_vm._l((_vm.userAuthorityList),function(item,index){return _c('div',{key:index,staticClass:\"label-position\"},[_c('label',{staticClass:\"label-position-left\"},[_vm._v(_vm._s(item.display_name))]),_vm._v(\" \"),_c('div',{staticClass:\"label-position-right\"},[_c('el-select',{attrs:{\"clearable\":\"\",\"size\":\"mini\",\"multiple\":\"\",\"placeholder\":\"请选择角色\"},model:{value:(item.groups),callback:function ($$v) {_vm.$set(item, \"groups\", $$v)},expression:\"item.groups\"}},_vm._l((_vm.optionsGroup),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)])}))]):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-11919ec5\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/user_page/user.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-11919ec5\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./user.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-11919ec5\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./user.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user_page/user.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}